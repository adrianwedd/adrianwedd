<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Adrian Wedd's interactive terminal interface - Modular Architecture v2.0">
    <meta name="author" content="Adrian Wedd">
    <title>Adrian Wedd - Terminal Interface v2.0</title>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="assets/terminal.css">
    <link rel="stylesheet" href="assets/accessibility.css">
    <link rel="stylesheet" href="assets/script-editor.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <main id="main-content" class="terminal-container">
        <!-- Terminal Header -->
        <header class="terminal-header">
            <div class="status-bar">
                <span class="status-item" data-status="system">System: <span id="system-status">READY</span></span>
                <span class="status-item" data-status="modules">Modules: <span id="module-count">0</span></span>
                <span class="status-item" data-status="voice">Voice: <span id="voice-status">CHECKING</span></span>
                <span class="status-item" data-status="theme">Theme: <span id="current-theme">matrix</span></span>
            </div>
        </header>
        
        <!-- Terminal Output -->
        <div id="output" class="terminal-output" role="log" aria-live="polite">
            <!-- Dynamic content will be inserted here -->
        </div>
        
        <!-- Terminal Input -->
        <form id="cli-form" class="terminal-input-form">
            <div class="input-line">
                <span id="prompt" class="prompt">guest@adrianwedd.com:~$</span>
                <input 
                    type="text" 
                    id="cli-input" 
                    class="cli-input"
                    autocomplete="off"
                    spellcheck="false"
                    autofocus
                    aria-label="Terminal command input"
                />
                <div class="voice-controls">
                    <div class="voice-indicator" id="voice-indicator">ðŸŽ¤</div>
                    <button type="button" class="voice-toggle" id="voice-toggle" aria-label="Toggle voice input">Voice</button>
                    <button type="button" class="speech-toggle" id="speech-toggle" aria-label="Toggle voice output">ðŸ”Š</button>
                </div>
            </div>
        </form>
        
        <!-- Hidden UI Elements for Feature Modules -->
        <div id="feature-containers" style="display: none;">
            <!-- Music Player Container -->
            <div id="music-player-container"></div>
            
            <!-- System Monitor Container -->
            <div id="system-monitor-container"></div>
            
            <!-- Script Editor Container -->
            <div id="script-editor-container"></div>
            
            <!-- AI Chat Container -->
            <div id="ai-chat-container"></div>
        </div>
    </main>
    
    <!-- Core Module (ES6 Modules) -->
    <script type="module">
        import { TerminalCore } from './assets/modules/terminal-core.js';
        
        // Initialize terminal when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            window.terminal = new TerminalCore({
                ui: {
                    outputElement: document.getElementById('output'),
                    inputElement: document.getElementById('cli-input'),
                    promptElement: document.getElementById('prompt')
                }
            });
            
            // Initialize terminal
            window.terminal.init().then(() => {
                console.log('Terminal initialized successfully');
                
                // Update status bar
                document.getElementById('system-status').textContent = 'ONLINE';
                document.getElementById('module-count').textContent = window.terminal.modules.size;
            }).catch(error => {
                console.error('Terminal initialization failed:', error);
                document.getElementById('system-status').textContent = 'ERROR';
            });
        });
    </script>
    
    <!-- Legacy Support Scripts (will be phased out) -->
    <script>
        // Compatibility shim for legacy code
        window.terminalCompat = {
            addOutput: (text, className) => {
                if (window.terminal && window.terminal.ui) {
                    window.terminal.ui.addOutput(text, className);
                }
            },
            executeCommand: (cmd) => {
                if (window.terminal && window.terminal.commandRouter) {
                    window.terminal.commandRouter.execute(cmd);
                }
            }
        };
    </script>
    
    <!-- Voice Interface -->
    <script src="assets/voice-interface.js"></script>
    
    <!-- External Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>